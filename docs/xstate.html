<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <title>XState</title>
    <meta name="description" content="bouwe.io, a blog by Bouwe Westerdijk" />
    <meta name="image" content="/bouwe-react-amsterdam.png" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="bouwe.io" />
    <meta property="og:url" content="https://bouwe.io" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="bouwe.io" />
    <meta
      property="og:description"
      content="bouwe.io, a blog by Bouwe Westerdijk"
    />
    <meta
      property="og:image"
      content="https://bouwe.io/bouwe-react-amsterdam.png"
    />
    <meta property="og:image:alt" content="Bouwe Westerdijk" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@bouwe" />
    <meta name="twitter:url" content="https://bouwe.io" />
    <meta name="twitter:title" content="XState" />
    <meta
      name="twitter:description"
      content="bouwe.io, a blog by Bouwe Westerdijk"
    />
    <meta
      name="twitter:image"
      content="https://bouwe.io/bouwe-react-amsterdam"
    />
    <meta name="twitter:image:alt" content="Bouwe Westerdijk" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="stylesheet" href="/styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Open Sans"
    />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.1/build/styles/atom-one-dark-reasonable.min.css"
    />
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.1/build/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
    <link
      href="/rss2.xml"
      type="application/rss+xml"
      rel="alternate"
      title="bouwe.io RSS Feed"
    />
    <link
      href="/atom.xml"
      type="application/atom+xml"
      rel="alternate"
      title="bouwe.io Atom feed"
    />
  </head>

  <body>
    <div>
      <header class="header">
        <div class="container">
          <div class="header-container">
            <div class="logo">
              <h1>
                <a href="/"
                  ><span class="logo-part1">bouwe</span
                  ><span class="logo-part2">.io</span></a
                >
              </h1>
            </div>
            <div class="nav"><ul class='nav-list'><li class='nav-item'><a href="/about" class='nav-inactive'>about</a></li><li class='nav-item'><a href="/blog" class='nav-inactive'>blog</a></li><li class='nav-item'><a href="/videos" class='nav-inactive'>videos</a></li><li class='nav-item'><a href="/contact" class='nav-inactive'>contact</a></li></ul></div>
          </div>
        </div>
      </header>
  
          <div class="main">
      <div class="container">
              <div>
        <h2 class="page-title">XState</h2>
      </div>

      <div><h1>State, events, and transitions</h1>
<p>Elke state is een object.</p>
<p>De machine config wil weten welke <code>states</code> er zijn: object van alle state objecten</p>
<p>En wil weten wat de <code>initialState</code> is.</p>
<p>Tot slot krijgt de machine nog een <code>id</code>:</p>
<pre><code class="language-js">const active = { }
const inactive = { }

const machineConfig = {
    id: 'myMachine',
    states: [active, inactive],
    initial: 'active'
}

const myMachine = Machine(machineConfig)
</code></pre>
<p>Met events ga je van de ene state naar de andere: transition</p>
<p>Op een state object definieer je een event transitie met <code>on</code>:</p>
<pre><code class="language-js">const ACTIVE = {
    on: {
        'TOGGLE': 'inactive',
    }
}
</code></pre>
<p>De event is <code>TOGGLE</code> en de state moet dan <code>inactive</code> worden, wat dus weer een ander state object is.</p>
<p>De <code>inactive</code> string is een shorthand voor:</p>
<pre><code class="language-js">{
    target: 'inactive'
}
</code></pre>
<p>Je gebruikt de object notatie als je meer wilt definiëren voor de transitie.</p>
<h1>Services</h1>
<p>An interpreted machine is a service.</p>
<pre><code class="language-js">const service = interpret(myMachine).start()
</code></pre>
<blockquote>
<p>ff checken: wij gebruiken <code>.start()</code> niet, is dat niet (meer) nodig?</p>
</blockquote>
<p>Via de service kun je events sturen:</p>
<pre><code class="language-js">service.send("TOOGLE")
</code></pre>
<p>Je kunt via de service ook op transitions reageren:</p>
<pre><code class="language-js">service.onTransition(state => console.log(state.value))
</code></pre>
<p>Dus elke keer als de state verandert via een sent event, wordt de nieuwe state gelogged.</p>
<p>Om te controleren of de machine zich in een bepaalde state bevindt gebruik je <code>state.matches</code>:</p>
<pre><code class="language-js">service.onTransition(state => {
    if (state.matches('end')) console.log('This is the end')
})
</code></pre>
<h1>Sending events from within the machine</h1>
<p>You can send events from within the machine, for example when you reach a specific state:</p>
<pre><code class="language-js">    on: {
        SPEAK: {
            actions: send('ECHO')
        },
        ECHO: {
            actions: () => console.log('echo echo')
        }
    }
</code></pre>
<p>So when the 'Speak' event is sent, on the next tick of the machine 'ECHO' will be sent.</p>
<h1>Actions</h1>
<p>Als de machine een bpaalde state bereikt kun je een action afvuren.</p>
<p>Door de transitie als een object te definiëren kun je een action meegeven:</p>
<pre><code class="language-js">{
    target: 'inactive',
    actions: (ctx, e) => console.log('Hello World')
}
</code></pre>
<p><code>actions</code> kan zowel een enkele function zijn als een array van functions.</p>
<p>Beter en mooier is om de <code>Machine</code> constructor een 2e argument (1e arg is machine config) mee te geven: het <code>options</code> object:</p>
<pre><code class="language-js">const myMachine = Machine({
    // ...
    states: {
        // ...
        active: {
            on: {
                TOGGLE: {
                    target: 'inactive',
                    actions: ['logStuff']
                }
            }
        }
    }
}, {
  actions: {
      logStuff: (ctx, e) => console.log('Hello World')
  }
})
</code></pre>
<p>In de transitie is de action een string die verwijst naar de action implementatie in het 2e (options) argument van de Machine.</p>
<p>Je kunt actions ook definiëren als een state wordt bereikt of verlaten:</p>
<pre><code class="language-js">const myMachine = Machine({
    // ...
    states: {
        // ...
        active: {
            on: {
                TOGGLE: {
                    target: 'inactive',
                    actions: ['logStuff']
                }
            },
            entry: (ctx, e) => console.log('state entered'),
            exit: (ctx, e) => console.log('state exited'),
        }
    }
}, {
  actions: {
      logStuff: (ctx, e) => console.log('Hello World)
  }
})
</code></pre>
<h1>Internal transitions</h1>
<blockquote>
<p>Mijn vertaling is dat dit een globale transitie is over de hele machine, ongeacht de huidige state, klopt dat???
Als ik dit lees kan ik het nog niet helemaal relateren: <a href="https://xstate.js.org/docs/guides/transitions.html#internal-transitions">https://xstate.js.org/docs/guides/transitions.html#internal-transitions</a></p>
</blockquote>
<p>Dus ik definieer een <code>on</code> buiten de states om. Je kunt dan, ongeacht de state, het event triggeren:</p>
<pre><code class="language-js">const myMachine = Machine({
    // ...
    states: {
        // ...
        quit: {
            entry: [(ctx, e) => log(ctx, e, 'entry QUIT')],
            exit: [(ctx, e) => log(ctx, e, 'exit QUIT')],
        }
    },
    // This transition applies to the whole machine, regardless of the current state.
    on: {
        QUIT: 'quit'
    }
}, {
    actions: {
      // ...
    }
})
</code></pre>
<p>Als je al op de QUIT state bent en kiest opnieuw 'quit' dan wordt de transitie toch weer opnieuw gemaakt. Je ziet dan de entry en exit logging.</p>
<p>Als je dat niet wilt, dan moet je een punt (.) voor de state naam zetten:</p>
<pre><code class="language-js">// This transition applies to the whole machine, regardless of the current state.
on: {
    // Note the dot: once on this state and an event is triggered to transition to quit again, 
    // the transition is not done again:
    QUIT: '.quit'
}
</code></pre>
<h1>Context / extended state / infinite state</h1>
<p>hier was ik gebleven, video nummer 11...</p>
</div>

            <div>
        <a
          href="https://twitter.com/intent/tweet?text=XState&url=https://bouwe.io/xstate&via=bouwe"
          >Share on Twitter</a
        >
        ·
        <a href="https://twitter.com/search?q=https://bouwe.io/xstate"
          >Discuss on Twitter</a
        >
        ·
        <a href="https://github.com/bouwe77/bouwe.io/edit/master/content/pages/xstate.md">Edit on GitHub</a>
      </div>

      </div>
    </div>

    <footer></footer>
  

    </div>

  </body>
</html>

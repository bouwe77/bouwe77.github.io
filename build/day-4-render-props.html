<!DOCTYPE html>
<html>
  <title>Day 4 - Render props</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/w3.css" />
  <link rel="stylesheet" href="/styles.css" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Bitter"
  />
  <body class="w3-light-grey">
    <!-- w3-content defines a container for fixed size centered content, 
and is wrapped around the whole page content. -->
    <div class="w3-content" style="max-width: 1400px">
      <!-- Header -->
      <header class="w3-container w3-padding-32">
        <h1>
          <b><a href="/">bouwe.io</a></b>
        </h1>
      </header>

      <!-- Grid -->
      <div class="w3-row">
        <div class="w3-col l8 s12">
          <!-- Blog entry -->
          <div class="w3-card-4 w3-margin w3-white">
            <div class="w3-container">
              <h3>
                <b><a href="#">Day 4 - Render props</a></b>
              </h3>
            </div>
            <div class="w3-container"><p><strong>Render what?</strong></p>
<p>Render props is one of the React patterns that was on my "React To Do list" for some time.
So today I decided to check out what the pattern is and to experiment with it.</p>
<p>As soon as I started reading what the pattern was it became clear to me it's not a thing I will
totally master within one day. My goal today is to have a basic understanding which problem
it solves. And the best way to do that is to make a very simple component and bring render
props into practice.</p>
<p>So what is render props?</p>
<blockquote>
<p>Render props is a pattern you can use to separate how a component <em>works</em> from how it <em>looks</em>.</p>
</blockquote>
<p>If you make this separation you can reuse the component's functionality in
other components that each define their own UI for that functionality. It also can be a nice
way to just separate the functionality from the UI when either one is complicated and you want
your code to be more readable or easier testable.</p>
<p><strong>Toggle component</strong></p>
<p>Let's create a very simple component, a Toggle component. Its functionality is that you can turn something on or off.
And the component renders a button to allow that:</p>
<pre><code class="language-js">function App() {
  return (
    &#x3C;div>
      &#x3C;Toggle />
    &#x3C;/div>
  );
}

function Toggle() {
  const [on, setOn] = useState(false);

  return &#x3C;button onClick={() => setOn(!on)}>{on ? "ON" : "OFF"}&#x3C;/button>;
}
</code></pre>
<p>Let's break this down.</p>
<p>What happens here is that the <code>App</code> component just renders a <code>Toggle</code> component.
In the Toggle component we render a button that you can press to turn it on or off. The button's
text contains the current state of the component: "ON" when the on variable is true, otherwise "OFF".</p>
<p>What the component renders depends on the value of the <code>on</code> variable. That's why we call React's
<a href="https://reactjs.org/docs/hooks-state.html">useState hook</a>. The useState hook returns two things: the <code>on</code> variable that contains the current
boolean value indicating the state is on or off and the <code>setOn</code> function which we must use to change
the value of the on variable.</p>
<p>With the button's <code>onClick</code> we call the setOn function, which makes React re-render the component
which in turn results in the button showing the current state.</p>
<p>What we have now is just a Toggle component, we haven't done anything with render props.</p>
<p><strong>Let's refactor first</strong></p>
<p>The toggle button is fine, but wouldn't it be nice to optionally replace it with a checkbox?
To make this possible the first step to take is moving the button out of the Toggle component into a function:</p>
<pre><code class="language-js">function renderToggleButton(toggle, on) {
  return &#x3C;button onClick={toggle}>{on ? "ON" : "OFF"}&#x3C;/button>;
}
</code></pre>
<p>This function has two arguments: a toggle function and the current on boolean value. The function renders
a button with an onClick that calls the toggle function. Note we do not pass anything to the toggle
function. It's not this function's responsibility to do the actual toggling. It only defines the UI and
<em>when</em> toggling should take place.</p>
<p>Now we update the Toggle component. It no longer renders the button, but it will call the <code>renderToggleButton</code>
function we just created. It passes a function that calls setOn and we also pass the current on boolean value:</p>
<pre><code class="language-js">function Toggle(props) {
  const [on, setOn] = useState(false);

  return &#x3C;>{renderToggleButton(() => setOn(!on), on)}&#x3C;/>;
}
</code></pre>
<p>The only thing we did here was <em>refactor</em> the code by separating the toggle functionality from the toggle UI.
It still only renders the toggle button.</p>
<p>Let's create an alternative UI for toggling, a checkbox. This function returns a checkbox and also displays "ON" of "OFF"
respectively:</p>
<pre><code class="language-js">function renderToggleCheckbox(toggle, on) {
  return (
    &#x3C;>
      &#x3C;input type="checkbox" checked={on} onChange={toggle} />
      {on ? "ON" : "OFF"}
    &#x3C;/>
  );
}
</code></pre>
<p>Here we also get the toggle function passed in and call it when the checkbox is checked or unchecked.
But the UI is totally different.</p>
<p>Now we can change the Toggle component so it renders a checkbox instead of a button:</p>
<pre><code class="language-js">function Toggle() {
  const [on, setOn] = useState(false);

  return &#x3C;>{renderToggleCheckbox(() => setOn(!on), on)}&#x3C;/>;
}
</code></pre>
<p>The Toggle functionality still works, but <em>looks different</em>. We have verified our Toggle component has become <em>independent</em> from
the UI.</p>
<p><strong>Render props at last</strong></p>
<p>The final step we have to take is to tell the Toggle component which UI it has to render. And we'll do that by passing in that UI.
And as we already created two functions that return the toggle UI, we need to change the Toggle component so it can receive one of
these functions. The way you pass in a function (or any value for that matter) to a component is by using props. And what we will
pass via props is a render function hence the name <em>render props</em>.</p>
<p>Let's render the Toggle component twice so we can pass in both render functions:</p>
<pre><code class="language-js">function App() {
  return (
    &#x3C;div>
      &#x3C;Toggle render={renderToggleButton} />
      &#x3C;Toggle render={renderToggleCheckbox} />
    &#x3C;/div>
  );
}
</code></pre>
<blockquote>
<p>Note that the name of the prop containing the render function is called <code>render</code>. However, this is not required,
it's just a <em>naming convention</em>, you can give it any name you like.</p>
</blockquote>
<p>The Toggle component should now receive props and call the render function from props:</p>
<pre><code class="language-js">function Toggle(props) {
  const [on, setOn] = useState(false);

  return &#x3C;>{props.render(() => setOn(!on), on)}&#x3C;/>;
}
</code></pre>
<p>And that's it! We created a Toggle component that is responsible for the Toggle functionality. How the UI looks is not its concern.
It gets passed in a render prop containing a function it calls to render a UI. What we can do now is create lots of different UIs
that implement ways to toggle.</p>
<p>I am really excited I have not only learned the basics of the render props pattern but
also implemented my first render props and created this blog to explain it to myself and you. My hands are itching (Dutch for being very
eager) to create the most ridiculous toggle UIs I can think off, but maybe that's something for a next time.</p>
<p>Check <a href="https://codesandbox.io/s/m54oh">my render props implementation</a> on CodeSandbox or the <a href="https://github.com/bouwe77/react-render-props">Github repo</a> for the full code of this blog post. Feel free to experiment with it.</p>
<p>And if you want to know more about render props, these two blog posts are great:</p>
<ul>
<li>
<p><a href="https://cdb.reacttraining.com/use-a-render-prop-50de598f11ce">Use a render prop</a> by Michael Jackson, where he introduces the pattern way back in 2017.</p>
</li>
<li>
<p><a href="https://kentcdodds.com/blog/react-hooks-whats-going-to-happen-to-render-props">What's going to happen to render props</a> by Kent C. Dodds where he explains what to do with render props now we have React hooks.</p>
</li>
</ul>
<p>I ignored that last blog post when writing this blog post, but I think it's food for thought and maybe even reason for a second
render props blog post.</p>
</div>
          </div>
          <hr />
        </div>

        <!-- Right side bar -->
        <div class="w3-col l4">
          <!-- END right side bar -->
        </div>

        <!-- END GRID -->
      </div>
      <br />

      <!-- END w3-content -->
    </div>

    <!-- Footer -->
    <footer class="w3-container w3-dark-grey w3-padding-32 w3-margin-top">
      <div class="w3-content" style="max-width: 1400px">
        <div class="w3-row">
          <div class="w3-col l8 s12">
            <a href="/workshops">Workshops</a> |
            <a href="/react">React</a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>

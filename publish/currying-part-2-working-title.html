<!DOCTYPE html>
<html lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <title>Currying Part 2 (Working Title)</title>
    <meta name="description" content="bouwe.io, a blog by Bouwe Westerdijk" />
    <meta name="image" content="/bouwe-react-amsterdam.png" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:site_name" content="bouwe.io" />
    <meta property="og:url" content="https://bouwe.io" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="bouwe.io" />
    <meta
      property="og:description"
      content="bouwe.io, a blog by Bouwe Westerdijk"
    />
    <meta
      property="og:image"
      content="https://bouwe.io/bouwe-react-amsterdam.png"
    />
    <meta property="og:image:alt" content="Bouwe Westerdijk" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:creator" content="@bouwe" />
    <meta name="twitter:url" content="https://bouwe.io" />
    <meta name="twitter:title" content="Currying Part 2 (Working Title)" />
    <meta
      name="twitter:description"
      content="bouwe.io, a blog by Bouwe Westerdijk"
    />
    <meta
      name="twitter:image"
      content="https://bouwe.io/bouwe-react-amsterdam"
    />
    <meta name="twitter:image:alt" content="Bouwe Westerdijk" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="stylesheet" href="/styles.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Open Sans"
    />
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.1/build/styles/atom-one-dark-reasonable.min.css"
    />
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.3.1/build/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
    <link
      href="/rss2.xml"
      type="application/rss+xml"
      rel="alternate"
      title="bouwe.io RSS Feed"
    />
    <link
      href="/atom.xml"
      type="application/atom+xml"
      rel="alternate"
      title="bouwe.io Atom feed"
    />
  </head>

  <body>
  <div>
    <header class="header">
      <div class="container">
        <div class="header-container">
          <div class="logo">
            <h1>
              <a href="/"
                ><span class="logo-part1">bouwe</span
                ><span class="logo-part2">.io</span></a
              >
            </h1>
          </div>
          <div class="nav"><ul class='nav-list'><li class='nav-item'><a href="/about" class='nav-inactive'>about</a></li><li class='nav-item'><a href="/blog" class='nav-active'>blog</a></li><li class='nav-item'><a href="/workshops" class='nav-inactive'>workshops</a></li><li class='nav-item'><a href="/links" class='nav-inactive'>links</a></li><li class='nav-item'><a href="/contact" class='nav-inactive'>contact</a></li></ul></div>
        </div>
      </div>
    </header>

    <div class="main">
      <div class="container">
        <div>
          <h2 class="blog-title">
            <a href="/currying-part-2-working-title">Currying Part 2 (Working Title)</a>
          </h2>
          <div class="blog-meta">
            Mar 21, 2021  · <a href="/categories/functional-programming">Functional programming</a>, <a href="/categories/javascript">JavaScript</a>, <a href="/categories/currying">Currying</a>  · 4 minute read
          </div>
        </div>

        <div><ul>
<li>
<p>Al met al is deze blog post een uitwerking van <a href="https://medium.com/javascript-scene/curry-and-function-composition-2c208d774983">https://medium.com/javascript-scene/curry-and-function-composition-2c208d774983</a> en dan vooral vanaf "Why do we curry?"</p>
</li>
<li>
<p>Composen van partially applied functions, dus van meerdere 1 function maken. Nog even kijken wat hierbij een goed voorbeeld is.</p>
</li>
</ul>
<h4>Introduction</h4>
<p>I find currying an intruiging pattern, just like many other of the concepts of functional programming. But for me, and I have also heard this from others, there are some challenges with currying: What is it and what is it good for? This was the title of my previous blog post about currying, but after finishing it, I realized I mainly covered the <em>what</em> part, and not entirely the <em>what is it good for</em> part.</p>
<p>So if you don't know what currying is, please read <a href="/currying-what-is-it-and-what-is-it-good-for">Part 1</a> where I try to explain it and which also contains some links to other resources that explain currying very well.</p>
<h4>Logging continued</h4>
<p>In this blog post we'll continue on the logging functionality we started with in <a href="/currying-what-is-it-and-what-is-it-good-for">Part 1</a>. I changed the code a bit, now the <code>log</code> function is split into a function that formats the log message and one that writes a message to the console. I also added a function that writes a message to a file:</p>
<pre><code class="language-js">function formatLog(datetime, severity, message) {
  return `${datetime} [${severity}] - ${message}`;
}

function writeToConsole(message) {
  console.log(message);
  return message;
}

function writeToFile(filePath, message) {
  fs.appendFile(filePath, message + "\n", (err) => {
    if (err) throw err;
  });
  return message;
}
</code></pre>
<p>What we can do now is call and combine different functions to achieve what we want:</p>
<pre><code class="language-js">// Write a log message to the console:
writeToConsole(formatLog(new Date().toISOString(), "INFO", "Hello World"));

// Write a log message to a file:
writeToFile(
  "/Users/bouwe/Documents/runjs/file88.log",
  formatLog(new Date().toISOString(), "INFO", "Hello World")
);

// Write a log message to both the console and a file:
writeToFile(
  "/Users/bouwe/Documents/runjs/file99.log",
  writeToConsole(formatLog(new Date().toISOString(), "INFO", "Hello World"))
);
</code></pre>
<p>Note how I nest different function calls to achieve what I want. To make it more declarative, lets create a fuction, which I can call to achieve the same:</p>
<pre><code class="language-js">const logInfo = (message) => {
  writeToFile(
    "/Users/bouwe/Documents/runjs/file101.log",
    writeToConsole(formatLog(new Date().toISOString(), "INFO", message))
  );
};

logInfo("Hello World");
</code></pre>
<p>Now I've prepared a <code>logInfo</code> function which abstracts all the details away so I don't need to provide these when logging.</p>
<p>Nice, but still the nesting of the functions...</p>
<h4>Why currying?</h4>
<p>In my previous blog post I wrote how currying, combined with partial application, allows composing new functions by creating them in advance with the values that are fixed, so when you call them you only have to provide the arguments that are not fixed.</p>
<p>However, there is a more important reason to use currying, which is also about composition, and that is combining multiple different functions into one new function.</p>
<h4>Composing</h4>
<p>Hier de compose toepassen:</p>
<pre><code class="language-js">const compose = (...fns) => (x) => fns.reduceRight((y, f) => f(y), x);
</code></pre>
<p>So what I can do now is this:</p>
<pre><code class="language-js">const decimaltoRomanNumeral = compose(
  replace_XXXXX_with_L,
  replace_VV_with_X,
  replace_IIIII_with_V,
  replicateIs
);
</code></pre>
<p>Note how I still pass the replace function in the reverse, just like when I nested the function calls, this will call the last function, <code>replicateIs</code> first, followed by <code>replace_IIIII_with_V</code>, etc.</p>
<h4>Piping</h4>
<p>Although the previous compose example works, it would make more sense to specify the functions in the order we want them to be called.</p>
<p>In functional programming languages like Haskell or F#, you would use <em>piping</em>, which is way to chain multiple function calls:</p>
<pre><code>//voorbeeld Haskell of F#
</code></pre>
<p>Uitleggen wat in de code hierboven gebeurt.</p>
<p>However, this is not (yet) possible in JavaScript.</p>
<blockquote>
<p>Hier een link naar da proposal.</p>
</blockquote>
<p>But what we can do is write a <code>pipe</code> function, that looks quite similar to the <code>compose</code> we made earlier:</p>
<pre><code class="language-js">const pipe = (...fns) => (x) => fns.reduce((y, f) => f(y), x);
</code></pre>
<p>Notice the slight difference with <code>compose</code>: We use <code>reduce</code> instead of <code>reduceRight</code>.</p>
<blockquote>
<p>I have already written about the useReducer hook in React and now am using reducers as well. However, "iets met dat ik nog niet goed genoeg weet wat reducers nou eigenlijk precies zijn en hoe ze werken". Fun fun function had een goeie uitleg en Eric Elliott ongetwijfeld ook... Dus dat wordt dan mijn volgende blog post...</p>
</blockquote>
<p>With this <code>pipe</code> function we can change the ... ... like this:</p>
<pre><code class="language-js">const decimaltoRomanNumeral = pipe(
  replicateIs,
  replace_IIIII_with_V,
  replace_VV_with_X,
  replace_XXXXX_with_L
);
</code></pre>
<p>So that is the difference between composing and piping: The <em>order</em> in which you specify which functions are composed together.</p>
<h4>Iets over map</h4>
<p>Volgens mij is een mooi voorbeeld dat ik een array van decimals heb en die dan kan ombutsen naar roman numerals...</p>
<p>...</p>
<h4>Conclusion</h4>
<p>Iets zeggen over dat we code declaratief hebben gemaakt, het gaat er om dat je allemaal functions maakt en die aanroept, zodat het een leesbaar geheel wordt van stapjes die elkaar aanroepen.</p>
<p>Huge shoutout enz.enz. <a href="https://medium.com/javascript-scene/curry-and-function-composition-2c208d774983">Curry and Function Composition</a> by Eric Elliott.</p>
</div>

        <div>
          <a
            href="https://twitter.com/intent/tweet?text=Currying Part 2 (Working Title)&url=https://bouwe.io/currying-part-2-working-title&via=bouwe"
            >Share on Twitter</a
          >
          ·
          <a href="https://twitter.com/search?q=https://bouwe.io/currying-part-2-working-title"
            >Discuss on Twitter</a
          >
          ·
          <a href="https://github.com/bouwe77/bouwe.io/edit/master/content/blog/currying-part-2-working-title/currying-part-2-working-title.md">Edit on GitHub</a>
        </div>
      </div>
    </div>

    <footer></footer>
  </div>
</body>

</html>
